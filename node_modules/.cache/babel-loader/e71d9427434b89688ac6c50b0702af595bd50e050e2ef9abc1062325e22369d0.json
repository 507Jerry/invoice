{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Guest1\\\\invoice01\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useScreenSize } from './hooks/useMediaQuery';\nimport { getDefaultInvoiceData } from './utils/invoiceUtils';\nimport { generatePDF } from './utils/pdfGenerator';\nimport { zh } from './locales/zh';\nimport { en } from './locales/en';\nimport InvoiceForm from './components/InvoiceForm';\nimport InvoicePreview from './components/InvoicePreview';\nimport './App.css';\n\n/**\r\n * 主应用组件\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  // 屏幕尺寸检测\n  const {\n    isLargeScreen,\n    isMediumScreen,\n    isSmallScreen,\n    isTinyScreen,\n    isMobile\n  } = useScreenSize();\n\n  // 发票数据状态\n  const [invoiceData, setInvoiceData] = useState(() => {\n    // 从localStorage加载数据，如果没有则使用默认数据\n    const savedData = localStorage.getItem('invoice_data');\n    if (savedData) {\n      try {\n        const parsed = JSON.parse(savedData);\n        // 转换日期字符串为Date对象\n        parsed.invoice.date = new Date(parsed.invoice.date);\n        parsed.invoice.dueDate = new Date(parsed.invoice.dueDate);\n        return parsed;\n      } catch (error) {\n        console.error('Failed to parse saved invoice data:', error);\n        return getDefaultInvoiceData();\n      }\n    }\n    return getDefaultInvoiceData();\n  });\n\n  // 预览显示状态\n  const [showPreview, setShowPreview] = useState(true);\n\n  // 当前语言\n  const language = invoiceData.language || 'zh';\n\n  // 翻译对象\n  const translations = language === 'zh' ? zh : en;\n\n  // 保存数据到localStorage\n  useEffect(() => {\n    localStorage.setItem('invoice_data', JSON.stringify(invoiceData));\n  }, [invoiceData]);\n\n  /**\r\n   * 重置表单\r\n   */\n  const handleReset = () => {\n    if (window.confirm(translations.resetForm + '?')) {\n      setInvoiceData(getDefaultInvoiceData());\n    }\n  };\n\n  /**\r\n   * 生成PDF\r\n   */\n  const handleGeneratePDF = () => {\n    try {\n      generatePDF(invoiceData, translations);\n    } catch (error) {\n      console.error('Failed to generate PDF:', error);\n      alert('生成PDF时发生错误，请重试。');\n    }\n  };\n\n  /**\r\n   * 切换预览显示\r\n   */\n  const togglePreview = () => {\n    setShowPreview(!showPreview);\n  };\n\n  // 根据屏幕尺寸确定布局\n  const getLayoutClass = () => {\n    if (isLargeScreen || isMediumScreen) {\n      return 'layout-desktop';\n    } else if (isSmallScreen) {\n      return 'layout-tablet';\n    } else {\n      return 'layout-mobile';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `app-container ${getLayoutClass()}`,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: translations.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [isMobile && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"preview-toggle-btn\",\n          onClick: togglePreview,\n          children: showPreview ? translations.hidePreview : translations.showPreview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"reset-btn\",\n          onClick: handleReset,\n          children: translations.resetForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"generate-btn\",\n          onClick: handleGeneratePDF,\n          children: translations.generatePDF\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"app-main\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"form-section\",\n        children: /*#__PURE__*/_jsxDEV(InvoiceForm, {\n          invoiceData: invoiceData,\n          setInvoiceData: setInvoiceData,\n          language: language,\n          translations: translations,\n          isMobile: isMobile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), (!isMobile || showPreview) && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"preview-section\",\n        children: /*#__PURE__*/_jsxDEV(InvoicePreview, {\n          invoiceData: invoiceData,\n          language: language,\n          translations: translations,\n          isMobile: isMobile,\n          showPreview: showPreview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), isMobile && !showPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-preview-hint\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: translations.previewHidden\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: togglePreview,\n        children: translations.showPreview\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"dley+od8lKrcH1FsSZ7/6TUQMG8=\", false, function () {\n  return [useScreenSize];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useScreenSize","getDefaultInvoiceData","generatePDF","zh","en","InvoiceForm","InvoicePreview","jsxDEV","_jsxDEV","App","_s","isLargeScreen","isMediumScreen","isSmallScreen","isTinyScreen","isMobile","invoiceData","setInvoiceData","savedData","localStorage","getItem","parsed","JSON","parse","invoice","date","Date","dueDate","error","console","showPreview","setShowPreview","language","translations","setItem","stringify","handleReset","window","confirm","resetForm","handleGeneratePDF","alert","togglePreview","getLayoutClass","className","children","title","fileName","_jsxFileName","lineNumber","columnNumber","onClick","hidePreview","previewHidden","_c","$RefreshReg$"],"sources":["C:/Users/Guest1/invoice01/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useScreenSize } from './hooks/useMediaQuery';\r\nimport { getDefaultInvoiceData } from './utils/invoiceUtils';\r\nimport { generatePDF } from './utils/pdfGenerator';\r\nimport { zh } from './locales/zh';\r\nimport { en } from './locales/en';\r\nimport InvoiceForm from './components/InvoiceForm';\r\nimport InvoicePreview from './components/InvoicePreview';\r\nimport './App.css';\r\n\r\n/**\r\n * 主应用组件\r\n */\r\nconst App = () => {\r\n  // 屏幕尺寸检测\r\n  const { isLargeScreen, isMediumScreen, isSmallScreen, isTinyScreen, isMobile } = useScreenSize();\r\n  \r\n  // 发票数据状态\r\n  const [invoiceData, setInvoiceData] = useState(() => {\r\n    // 从localStorage加载数据，如果没有则使用默认数据\r\n    const savedData = localStorage.getItem('invoice_data');\r\n    if (savedData) {\r\n      try {\r\n        const parsed = JSON.parse(savedData);\r\n        // 转换日期字符串为Date对象\r\n        parsed.invoice.date = new Date(parsed.invoice.date);\r\n        parsed.invoice.dueDate = new Date(parsed.invoice.dueDate);\r\n        return parsed;\r\n      } catch (error) {\r\n        console.error('Failed to parse saved invoice data:', error);\r\n        return getDefaultInvoiceData();\r\n      }\r\n    }\r\n    return getDefaultInvoiceData();\r\n  });\r\n\r\n  // 预览显示状态\r\n  const [showPreview, setShowPreview] = useState(true);\r\n\r\n  // 当前语言\r\n  const language = invoiceData.language || 'zh';\r\n  \r\n  // 翻译对象\r\n  const translations = language === 'zh' ? zh : en;\r\n\r\n  // 保存数据到localStorage\r\n  useEffect(() => {\r\n    localStorage.setItem('invoice_data', JSON.stringify(invoiceData));\r\n  }, [invoiceData]);\r\n\r\n  /**\r\n   * 重置表单\r\n   */\r\n  const handleReset = () => {\r\n    if (window.confirm(translations.resetForm + '?')) {\r\n      setInvoiceData(getDefaultInvoiceData());\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 生成PDF\r\n   */\r\n  const handleGeneratePDF = () => {\r\n    try {\r\n      generatePDF(invoiceData, translations);\r\n    } catch (error) {\r\n      console.error('Failed to generate PDF:', error);\r\n      alert('生成PDF时发生错误，请重试。');\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 切换预览显示\r\n   */\r\n  const togglePreview = () => {\r\n    setShowPreview(!showPreview);\r\n  };\r\n\r\n  // 根据屏幕尺寸确定布局\r\n  const getLayoutClass = () => {\r\n    if (isLargeScreen || isMediumScreen) {\r\n      return 'layout-desktop';\r\n    } else if (isSmallScreen) {\r\n      return 'layout-tablet';\r\n    } else {\r\n      return 'layout-mobile';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`app-container ${getLayoutClass()}`}>\r\n      {/* 头部 */}\r\n      <header className=\"app-header\">\r\n        <h1>{translations.title}</h1>\r\n        <div className=\"header-actions\">\r\n          {isMobile && (\r\n            <button \r\n              className=\"preview-toggle-btn\"\r\n              onClick={togglePreview}\r\n            >\r\n              {showPreview ? translations.hidePreview : translations.showPreview}\r\n            </button>\r\n          )}\r\n          <button className=\"reset-btn\" onClick={handleReset}>\r\n            {translations.resetForm}\r\n          </button>\r\n          <button className=\"generate-btn\" onClick={handleGeneratePDF}>\r\n            {translations.generatePDF}\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {/* 主要内容区域 */}\r\n      <main className=\"app-main\">\r\n        {/* 表单区域 */}\r\n        <section className=\"form-section\">\r\n          <InvoiceForm\r\n            invoiceData={invoiceData}\r\n            setInvoiceData={setInvoiceData}\r\n            language={language}\r\n            translations={translations}\r\n            isMobile={isMobile}\r\n          />\r\n        </section>\r\n\r\n        {/* 预览区域 */}\r\n        {(!isMobile || showPreview) && (\r\n          <section className=\"preview-section\">\r\n            <InvoicePreview\r\n              invoiceData={invoiceData}\r\n              language={language}\r\n              translations={translations}\r\n              isMobile={isMobile}\r\n              showPreview={showPreview}\r\n            />\r\n          </section>\r\n        )}\r\n      </main>\r\n\r\n      {/* 移动端预览提示 */}\r\n      {isMobile && !showPreview && (\r\n        <div className=\"mobile-preview-hint\">\r\n          <p>{translations.previewHidden}</p>\r\n          <button onClick={togglePreview}>\r\n            {translations.showPreview}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}