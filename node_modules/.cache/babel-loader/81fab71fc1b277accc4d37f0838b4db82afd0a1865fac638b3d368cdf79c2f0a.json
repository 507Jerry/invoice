{"ast":null,"code":"import jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport { formatCurrency, formatDate, calculateLineSubtotal, calculateInvoiceTotal } from './invoiceUtils';\n\n/**\r\n * 生成PDF发票\r\n * @param {object} invoiceData - 发票数据\r\n * @param {object} translations - 翻译对象\r\n */\nexport const generatePDF = (invoiceData, translations) => {\n  const {\n    company,\n    client,\n    invoice,\n    items,\n    settings,\n    note,\n    payment\n  } = invoiceData;\n  const {\n    includeGST,\n    gstRate\n  } = settings;\n  const totals = calculateInvoiceTotal(items, includeGST, gstRate);\n\n  // 创建PDF文档\n  const doc = new jsPDF('p', 'mm', 'a4');\n  const pageWidth = doc.internal.pageSize.getWidth();\n  const pageHeight = doc.internal.pageSize.getHeight();\n  const margin = 20;\n  const contentWidth = pageWidth - 2 * margin;\n  let yPosition = margin;\n\n  // 设置字体\n  doc.setFont('helvetica');\n  doc.setFontSize(10);\n\n  // 添加页眉（每页都显示）\n  addHeader(doc, company, pageWidth, margin);\n\n  // 发票标题\n  doc.setFontSize(24);\n  doc.setFont('helvetica', 'bold');\n  doc.text(translations.invoice, pageWidth - margin - 30, yPosition);\n  yPosition += 20;\n\n  // 公司信息\n  doc.setFontSize(12);\n  doc.setFont('helvetica', 'bold');\n  doc.text(company.name, margin, yPosition);\n  yPosition += 8;\n  if (company.slogan) {\n    doc.setFontSize(10);\n    doc.setFont('helvetica', 'italic');\n    doc.text(company.slogan, margin, yPosition);\n    yPosition += 8;\n  }\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'normal');\n  doc.text(`ABN: ${company.abn}`, margin, yPosition);\n  yPosition += 6;\n  doc.text(company.address, margin, yPosition);\n  yPosition += 6;\n  doc.text(`${company.phone} | ${company.email}`, margin, yPosition);\n  yPosition += 20;\n\n  // 发票信息区域\n  const infoY = yPosition;\n\n  // 客户信息\n  doc.setFontSize(12);\n  doc.setFont('helvetica', 'bold');\n  doc.text(translations.invoiceTo, margin, infoY);\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'normal');\n  doc.text(client.name, margin, infoY + 8);\n  doc.text(client.address, margin, infoY + 14);\n  if (client.phone) {\n    doc.text(client.phone, margin, infoY + 20);\n  }\n\n  // 发票详情\n  const detailX = pageWidth - margin - 60;\n  const detailY = infoY;\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'normal');\n  const details = [{\n    label: translations.invoiceNumber,\n    value: invoice.number\n  }, {\n    label: translations.invoiceDate,\n    value: formatDate(invoice.date)\n  }, {\n    label: translations.dueDate,\n    value: formatDate(invoice.dueDate)\n  }];\n  if (invoice.projectDescription) {\n    details.push({\n      label: translations.projectDescription,\n      value: invoice.projectDescription\n    });\n  }\n  if (invoice.poNumber) {\n    details.push({\n      label: translations.poNumber,\n      value: invoice.poNumber\n    });\n  }\n  details.forEach((detail, index) => {\n    const y = detailY + index * 6;\n    doc.text(detail.label + ':', detailX, y);\n    doc.text(detail.value, detailX + 40, y);\n  });\n  yPosition = Math.max(infoY + 30, detailY + details.length * 6 + 10);\n\n  // 添加备注（note）\n  if (note) {\n    doc.setFontSize(11);\n    doc.setFont('helvetica', 'italic');\n    doc.text(translations.note + ':', margin, yPosition);\n    yPosition += 7;\n    doc.setFont('helvetica', 'normal');\n    const noteLines = doc.splitTextToSize(note, contentWidth);\n    doc.text(noteLines, margin, yPosition);\n    yPosition += noteLines.length * 6 + 4;\n  }\n\n  // 明细表格\n  const tableData = items.map(item => [item.name, item.quantity.toString(), formatCurrency(item.unitPrice), formatCurrency(calculateLineSubtotal(item.quantity, item.unitPrice))]);\n  const tableHeaders = [translations.itemName, translations.quantity, translations.unitPrice, translations.subtotal];\n\n  // 计算表格位置和高度\n  const tableY = yPosition;\n  const tableHeight = 10 + items.length * 8; // 估算表格高度\n  const remainingHeight = pageHeight - tableY - 60; // 预留总计和页脚空间\n\n  // 如果表格太高，需要分页\n  if (tableHeight > remainingHeight) {\n    // 第一页表格\n    const firstPageRows = Math.floor(remainingHeight / 8) - 1;\n    const firstPageData = tableData.slice(0, firstPageRows);\n    doc.autoTable({\n      head: [tableHeaders],\n      body: firstPageData,\n      startY: tableY,\n      margin: {\n        left: margin,\n        right: margin\n      },\n      styles: {\n        fontSize: 9,\n        cellPadding: 3\n      },\n      headStyles: {\n        fillColor: [52, 152, 219],\n        textColor: 255,\n        fontStyle: 'bold'\n      },\n      columnStyles: {\n        0: {\n          cellWidth: 80\n        },\n        1: {\n          cellWidth: 20,\n          halign: 'center'\n        },\n        2: {\n          cellWidth: 30,\n          halign: 'right'\n        },\n        3: {\n          cellWidth: 30,\n          halign: 'right'\n        }\n      }\n    });\n\n    // 添加后续页面的表格\n    const remainingData = tableData.slice(firstPageRows);\n    let currentPage = 1;\n    while (remainingData.length > 0) {\n      doc.addPage();\n\n      // 添加页眉\n      addHeader(doc, company, pageWidth, margin);\n\n      // 计算当前页可容纳的行数\n      const rowsPerPage = Math.floor((pageHeight - margin - 60) / 8) - 1;\n      const pageData = remainingData.slice(0, rowsPerPage);\n      doc.autoTable({\n        head: [tableHeaders],\n        body: pageData,\n        startY: margin + 20,\n        margin: {\n          left: margin,\n          right: margin\n        },\n        styles: {\n          fontSize: 9,\n          cellPadding: 3\n        },\n        headStyles: {\n          fillColor: [52, 152, 219],\n          textColor: 255,\n          fontStyle: 'bold'\n        },\n        columnStyles: {\n          0: {\n            cellWidth: 80\n          },\n          1: {\n            cellWidth: 20,\n            halign: 'center'\n          },\n          2: {\n            cellWidth: 30,\n            halign: 'right'\n          },\n          3: {\n            cellWidth: 30,\n            halign: 'right'\n          }\n        }\n      });\n      remainingData.splice(0, rowsPerPage);\n      currentPage++;\n    }\n\n    // 最后一页添加总计\n    addTotalsAndFooter(doc, totals, includeGST, gstRate, translations, pageWidth, margin);\n  } else {\n    // 单页表格\n    doc.autoTable({\n      head: [tableHeaders],\n      body: tableData,\n      startY: tableY,\n      margin: {\n        left: margin,\n        right: margin\n      },\n      styles: {\n        fontSize: 9,\n        cellPadding: 3\n      },\n      headStyles: {\n        fillColor: [52, 152, 219],\n        textColor: 255,\n        fontStyle: 'bold'\n      },\n      columnStyles: {\n        0: {\n          cellWidth: 80\n        },\n        1: {\n          cellWidth: 20,\n          halign: 'center'\n        },\n        2: {\n          cellWidth: 30,\n          halign: 'right'\n        },\n        3: {\n          cellWidth: 30,\n          halign: 'right'\n        }\n      }\n    });\n\n    // 添加总计和页脚\n    addTotalsAndFooter(doc, totals, includeGST, gstRate, translations, pageWidth, margin);\n  }\n\n  // 添加支付信息\n  doc.setFontSize(11);\n  doc.setFont('helvetica', 'bold');\n  doc.text(translations.paymentInfo, margin, yPosition);\n  yPosition += 7;\n  doc.setFont('helvetica', 'normal');\n  if (payment.method === 'bank') {\n    doc.text(`${translations.bankAccountName}: ${payment.bankAccount}`, margin, yPosition);\n    yPosition += 6;\n    doc.text(`BSB: ${payment.bsb}`, margin, yPosition);\n    yPosition += 6;\n    doc.text(`${translations.accountNumber}: ${payment.accountNumber}`, margin, yPosition);\n    yPosition += 8;\n  } else {\n    doc.text(`${translations.bpayNumber}: ${payment.bpayNumber}`, margin, yPosition);\n    yPosition += 8;\n  }\n\n  // 保存PDF\n  const fileName = `invoice_${invoice.number.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`;\n  doc.save(fileName);\n};\n\n/**\r\n * 添加页眉\r\n * @param {object} doc - PDF文档对象\r\n * @param {object} company - 公司信息\r\n * @param {number} pageWidth - 页面宽度\r\n * @param {number} margin - 边距\r\n */\nconst addHeader = (doc, company, pageWidth, margin) => {\n  doc.setFontSize(8);\n  doc.setFont('helvetica', 'normal');\n  doc.text(`ABN: ${company.abn}`, margin, 15);\n  doc.text(company.name, pageWidth - margin - 30, 15, {\n    align: 'right'\n  });\n};\n\n/**\r\n * 添加总计和页脚\r\n * @param {object} doc - PDF文档对象\r\n * @param {object} totals - 总计信息\r\n * @param {boolean} includeGST - 是否包含GST\r\n * @param {number} gstRate - GST税率\r\n * @param {object} translations - 翻译对象\r\n * @param {number} pageWidth - 页面宽度\r\n * @param {number} margin - 边距\r\n */\nconst addTotalsAndFooter = (doc, totals, includeGST, gstRate, translations, pageWidth, margin) => {\n  const pageHeight = doc.internal.pageSize.getHeight();\n  let yPosition = pageHeight - 80;\n\n  // 总计\n  const totalX = pageWidth - margin - 60;\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'normal');\n  if (includeGST) {\n    doc.text(`${translations.subtotal}:`, totalX, yPosition);\n    doc.text(formatCurrency(totals.subtotal), totalX + 40, yPosition, {\n      align: 'right'\n    });\n    yPosition += 8;\n    doc.text(`${translations.gst} (${(gstRate * 100).toFixed(0)}%):`, totalX, yPosition);\n    doc.text(formatCurrency(totals.gst), totalX + 40, yPosition, {\n      align: 'right'\n    });\n    yPosition += 8;\n  }\n  doc.setFontSize(12);\n  doc.setFont('helvetica', 'bold');\n  doc.text(`${translations.total}:`, totalX, yPosition);\n  doc.text(formatCurrency(totals.total), totalX + 40, yPosition, {\n    align: 'right'\n  });\n\n  // 页脚\n  yPosition = pageHeight - 40;\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'bold');\n  doc.text(translations.thankYou, pageWidth - margin - 30, yPosition + 20, {\n    align: 'right'\n  });\n};","map":{"version":3,"names":["jsPDF","formatCurrency","formatDate","calculateLineSubtotal","calculateInvoiceTotal","generatePDF","invoiceData","translations","company","client","invoice","items","settings","note","payment","includeGST","gstRate","totals","doc","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","margin","contentWidth","yPosition","setFont","setFontSize","addHeader","text","name","slogan","abn","address","phone","email","infoY","invoiceTo","detailX","detailY","details","label","invoiceNumber","value","number","invoiceDate","date","dueDate","projectDescription","push","poNumber","forEach","detail","index","y","Math","max","length","noteLines","splitTextToSize","tableData","map","item","quantity","toString","unitPrice","tableHeaders","itemName","subtotal","tableY","tableHeight","remainingHeight","firstPageRows","floor","firstPageData","slice","autoTable","head","body","startY","left","right","styles","fontSize","cellPadding","headStyles","fillColor","textColor","fontStyle","columnStyles","cellWidth","halign","remainingData","currentPage","addPage","rowsPerPage","pageData","splice","addTotalsAndFooter","paymentInfo","method","bankAccountName","bankAccount","bsb","accountNumber","bpayNumber","fileName","replace","save","align","totalX","gst","toFixed","total","thankYou"],"sources":["C:/Users/Guest1/invoice01/src/utils/pdfGenerator.js"],"sourcesContent":["import jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\nimport { formatCurrency, formatDate, calculateLineSubtotal, calculateInvoiceTotal } from './invoiceUtils';\r\n\r\n/**\r\n * 生成PDF发票\r\n * @param {object} invoiceData - 发票数据\r\n * @param {object} translations - 翻译对象\r\n */\r\nexport const generatePDF = (invoiceData, translations) => {\r\n  const { company, client, invoice, items, settings, note, payment } = invoiceData;\r\n  const { includeGST, gstRate } = settings;\r\n  const totals = calculateInvoiceTotal(items, includeGST, gstRate);\r\n\r\n  // 创建PDF文档\r\n  const doc = new jsPDF('p', 'mm', 'a4');\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const margin = 20;\r\n  const contentWidth = pageWidth - 2 * margin;\r\n  \r\n  let yPosition = margin;\r\n\r\n  // 设置字体\r\n  doc.setFont('helvetica');\r\n  doc.setFontSize(10);\r\n\r\n  // 添加页眉（每页都显示）\r\n  addHeader(doc, company, pageWidth, margin);\r\n\r\n  // 发票标题\r\n  doc.setFontSize(24);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.text(translations.invoice, pageWidth - margin - 30, yPosition);\r\n  yPosition += 20;\r\n\r\n  // 公司信息\r\n  doc.setFontSize(12);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.text(company.name, margin, yPosition);\r\n  yPosition += 8;\r\n\r\n  if (company.slogan) {\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'italic');\r\n    doc.text(company.slogan, margin, yPosition);\r\n    yPosition += 8;\r\n  }\r\n\r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.text(`ABN: ${company.abn}`, margin, yPosition);\r\n  yPosition += 6;\r\n  doc.text(company.address, margin, yPosition);\r\n  yPosition += 6;\r\n  doc.text(`${company.phone} | ${company.email}`, margin, yPosition);\r\n  yPosition += 20;\r\n\r\n  // 发票信息区域\r\n  const infoY = yPosition;\r\n  \r\n  // 客户信息\r\n  doc.setFontSize(12);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.text(translations.invoiceTo, margin, infoY);\r\n  \r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.text(client.name, margin, infoY + 8);\r\n  doc.text(client.address, margin, infoY + 14);\r\n  if (client.phone) {\r\n    doc.text(client.phone, margin, infoY + 20);\r\n  }\r\n\r\n  // 发票详情\r\n  const detailX = pageWidth - margin - 60;\r\n  const detailY = infoY;\r\n  \r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'normal');\r\n  \r\n  const details = [\r\n    { label: translations.invoiceNumber, value: invoice.number },\r\n    { label: translations.invoiceDate, value: formatDate(invoice.date) },\r\n    { label: translations.dueDate, value: formatDate(invoice.dueDate) }\r\n  ];\r\n\r\n  if (invoice.projectDescription) {\r\n    details.push({ label: translations.projectDescription, value: invoice.projectDescription });\r\n  }\r\n  if (invoice.poNumber) {\r\n    details.push({ label: translations.poNumber, value: invoice.poNumber });\r\n  }\r\n\r\n  details.forEach((detail, index) => {\r\n    const y = detailY + (index * 6);\r\n    doc.text(detail.label + ':', detailX, y);\r\n    doc.text(detail.value, detailX + 40, y);\r\n  });\r\n\r\n  yPosition = Math.max(infoY + 30, detailY + (details.length * 6) + 10);\r\n\r\n  // 添加备注（note）\r\n  if (note) {\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'italic');\r\n    doc.text(translations.note + ':', margin, yPosition);\r\n    yPosition += 7;\r\n    doc.setFont('helvetica', 'normal');\r\n    const noteLines = doc.splitTextToSize(note, contentWidth);\r\n    doc.text(noteLines, margin, yPosition);\r\n    yPosition += noteLines.length * 6 + 4;\r\n  }\r\n\r\n  // 明细表格\r\n  const tableData = items.map(item => [\r\n    item.name,\r\n    item.quantity.toString(),\r\n    formatCurrency(item.unitPrice),\r\n    formatCurrency(calculateLineSubtotal(item.quantity, item.unitPrice))\r\n  ]);\r\n\r\n  const tableHeaders = [\r\n    translations.itemName,\r\n    translations.quantity,\r\n    translations.unitPrice,\r\n    translations.subtotal\r\n  ];\r\n\r\n  // 计算表格位置和高度\r\n  const tableY = yPosition;\r\n  const tableHeight = 10 + (items.length * 8); // 估算表格高度\r\n  const remainingHeight = pageHeight - tableY - 60; // 预留总计和页脚空间\r\n\r\n  // 如果表格太高，需要分页\r\n  if (tableHeight > remainingHeight) {\r\n    // 第一页表格\r\n    const firstPageRows = Math.floor(remainingHeight / 8) - 1;\r\n    const firstPageData = tableData.slice(0, firstPageRows);\r\n    \r\n    doc.autoTable({\r\n      head: [tableHeaders],\r\n      body: firstPageData,\r\n      startY: tableY,\r\n      margin: { left: margin, right: margin },\r\n      styles: {\r\n        fontSize: 9,\r\n        cellPadding: 3\r\n      },\r\n      headStyles: {\r\n        fillColor: [52, 152, 219],\r\n        textColor: 255,\r\n        fontStyle: 'bold'\r\n      },\r\n      columnStyles: {\r\n        0: { cellWidth: 80 },\r\n        1: { cellWidth: 20, halign: 'center' },\r\n        2: { cellWidth: 30, halign: 'right' },\r\n        3: { cellWidth: 30, halign: 'right' }\r\n      }\r\n    });\r\n\r\n    // 添加后续页面的表格\r\n    const remainingData = tableData.slice(firstPageRows);\r\n    let currentPage = 1;\r\n    \r\n    while (remainingData.length > 0) {\r\n      doc.addPage();\r\n      \r\n      // 添加页眉\r\n      addHeader(doc, company, pageWidth, margin);\r\n      \r\n      // 计算当前页可容纳的行数\r\n      const rowsPerPage = Math.floor((pageHeight - margin - 60) / 8) - 1;\r\n      const pageData = remainingData.slice(0, rowsPerPage);\r\n      \r\n      doc.autoTable({\r\n        head: [tableHeaders],\r\n        body: pageData,\r\n        startY: margin + 20,\r\n        margin: { left: margin, right: margin },\r\n        styles: {\r\n          fontSize: 9,\r\n          cellPadding: 3\r\n        },\r\n        headStyles: {\r\n          fillColor: [52, 152, 219],\r\n          textColor: 255,\r\n          fontStyle: 'bold'\r\n        },\r\n        columnStyles: {\r\n          0: { cellWidth: 80 },\r\n          1: { cellWidth: 20, halign: 'center' },\r\n          2: { cellWidth: 30, halign: 'right' },\r\n          3: { cellWidth: 30, halign: 'right' }\r\n        }\r\n      });\r\n      \r\n      remainingData.splice(0, rowsPerPage);\r\n      currentPage++;\r\n    }\r\n    \r\n    // 最后一页添加总计\r\n    addTotalsAndFooter(doc, totals, includeGST, gstRate, translations, pageWidth, margin);\r\n  } else {\r\n    // 单页表格\r\n    doc.autoTable({\r\n      head: [tableHeaders],\r\n      body: tableData,\r\n      startY: tableY,\r\n      margin: { left: margin, right: margin },\r\n      styles: {\r\n        fontSize: 9,\r\n        cellPadding: 3\r\n      },\r\n      headStyles: {\r\n        fillColor: [52, 152, 219],\r\n        textColor: 255,\r\n        fontStyle: 'bold'\r\n      },\r\n      columnStyles: {\r\n        0: { cellWidth: 80 },\r\n        1: { cellWidth: 20, halign: 'center' },\r\n        2: { cellWidth: 30, halign: 'right' },\r\n        3: { cellWidth: 30, halign: 'right' }\r\n      }\r\n    });\r\n\r\n    // 添加总计和页脚\r\n    addTotalsAndFooter(doc, totals, includeGST, gstRate, translations, pageWidth, margin);\r\n  }\r\n\r\n  // 添加支付信息\r\n  doc.setFontSize(11);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.text(translations.paymentInfo, margin, yPosition);\r\n  yPosition += 7;\r\n  doc.setFont('helvetica', 'normal');\r\n  if (payment.method === 'bank') {\r\n    doc.text(`${translations.bankAccountName}: ${payment.bankAccount}`, margin, yPosition);\r\n    yPosition += 6;\r\n    doc.text(`BSB: ${payment.bsb}`, margin, yPosition);\r\n    yPosition += 6;\r\n    doc.text(`${translations.accountNumber}: ${payment.accountNumber}`, margin, yPosition);\r\n    yPosition += 8;\r\n  } else {\r\n    doc.text(`${translations.bpayNumber}: ${payment.bpayNumber}`, margin, yPosition);\r\n    yPosition += 8;\r\n  }\r\n\r\n  // 保存PDF\r\n  const fileName = `invoice_${invoice.number.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`;\r\n  doc.save(fileName);\r\n};\r\n\r\n/**\r\n * 添加页眉\r\n * @param {object} doc - PDF文档对象\r\n * @param {object} company - 公司信息\r\n * @param {number} pageWidth - 页面宽度\r\n * @param {number} margin - 边距\r\n */\r\nconst addHeader = (doc, company, pageWidth, margin) => {\r\n  doc.setFontSize(8);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.text(`ABN: ${company.abn}`, margin, 15);\r\n  doc.text(company.name, pageWidth - margin - 30, 15, { align: 'right' });\r\n};\r\n\r\n/**\r\n * 添加总计和页脚\r\n * @param {object} doc - PDF文档对象\r\n * @param {object} totals - 总计信息\r\n * @param {boolean} includeGST - 是否包含GST\r\n * @param {number} gstRate - GST税率\r\n * @param {object} translations - 翻译对象\r\n * @param {number} pageWidth - 页面宽度\r\n * @param {number} margin - 边距\r\n */\r\nconst addTotalsAndFooter = (doc, totals, includeGST, gstRate, translations, pageWidth, margin) => {\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  let yPosition = pageHeight - 80;\r\n\r\n  // 总计\r\n  const totalX = pageWidth - margin - 60;\r\n  \r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'normal');\r\n  \r\n  if (includeGST) {\r\n    doc.text(`${translations.subtotal}:`, totalX, yPosition);\r\n    doc.text(formatCurrency(totals.subtotal), totalX + 40, yPosition, { align: 'right' });\r\n    yPosition += 8;\r\n    \r\n    doc.text(`${translations.gst} (${(gstRate * 100).toFixed(0)}%):`, totalX, yPosition);\r\n    doc.text(formatCurrency(totals.gst), totalX + 40, yPosition, { align: 'right' });\r\n    yPosition += 8;\r\n  }\r\n  \r\n  doc.setFontSize(12);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.text(`${translations.total}:`, totalX, yPosition);\r\n  doc.text(formatCurrency(totals.total), totalX + 40, yPosition, { align: 'right' });\r\n\r\n  // 页脚\r\n  yPosition = pageHeight - 40;\r\n  \r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.text(translations.thankYou, pageWidth - margin - 30, yPosition + 20, { align: 'right' });\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}